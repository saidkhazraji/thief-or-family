<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thief or My Family - Game Penjaga Rumah</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }         
        body {
            background: linear-gradient(135deg, #0f172a, #1e293b);
            color: #f1f5f9;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* BACKGROUND STATIS */
        .static-house-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 400px;
            background: linear-gradient(to bottom, #1e3a8a, #3b82f6, #60a5fa);
            z-index: -2;
            overflow: hidden;
        }

        .house-silhouette {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 600px;
            height: 300px;
            background: linear-gradient(45deg, #92400e, #b45309);
            clip-path: polygon(0% 100%, 20% 40%, 40% 60%, 60% 30%, 80% 50%, 100% 100%);
            opacity: 0.8;
        }

        .window-light {
            position: absolute;
            width: 40px;
            height: 60px;
            background: #fbbf24;
            border-radius: 5px;
            box-shadow: 0 0 30px #fbbf24;
        }

        .window-1 { top: 100px; left: 45%; }
        .window-2 { top: 150px; left: 55%; }

        /* NAME INPUT MODAL */
        .name-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 3000;
            display: flex;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(10px);
        }

        .name-content {
            background: linear-gradient(135deg, #1e293b, #0f172a);
            padding: 50px;
            border-radius: 20px;
            border: 4px solid #f59e0b;
            max-width: 600px;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8);
        }

        .name-title {
            color: #fbbf24;
            font-size: 2.5em;
            margin-bottom: 30px;
            text-shadow: 2px 2px 0 #000;
        }

        .name-input-container {
            margin: 30px 0;
        }

        .name-label {
            display: block;
            color: #60a5fa;
            font-size: 1.2em;
            margin-bottom: 15px;
            text-align: left;
        }

        .name-input {
            width: 100%;
            padding: 20px;
            font-size: 1.3em;
            background: rgba(255, 255, 255, 0.1);
            border: 3px solid #3b82f6;
            border-radius: 10px;
            color: white;
            outline: none;
            transition: all 0.3s;
        }

        .name-input:focus {
            border-color: #f59e0b;
            box-shadow: 0 0 20px rgba(245, 158, 11, 0.5);
        }

        .name-hint {
            color: #94a3b8;
            font-size: 0.9em;
            margin-top: 10px;
            text-align: left;
        }

        .start-story-btn {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            color: white;
            padding: 20px 50px;
            font-size: 1.5em;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-top: 30px;
            width: 100%;
        }

        .start-story-btn:hover:not(:disabled) {
            transform: scale(1.05);
            box-shadow: 0 20px 50px rgba(59, 130, 246, 0.5);
        }

        .start-story-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* STORY MODAL */
        .story-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 2999;
            display: none;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(10px);
        }

        .story-content {
            background: linear-gradient(135deg, #1e293b, #0f172a);
            padding: 40px;
            border-radius: 20px;
            border: 4px solid #f59e0b;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8);
        }

        .story-title {
            color: #fbbf24;
            font-size: 2.5em;
            text-align: center;
            margin-bottom: 30px;
            text-shadow: 2px 2px 0 #000;
        }

        .story-text {
            font-size: 1.3em;
            line-height: 1.8;
            color: #cbd5e1;
            margin-bottom: 25px;
            text-align: justify;
        }

        .story-text strong {
            color: #f59e0b;
        }

        .news-banner {
            background: rgba(239, 68, 68, 0.2);
            border-left: 5px solid #ef4444;
            padding: 20px;
            margin: 25px 0;
            border-radius: 10px;
        }

        .news-title {
            color: #ef4444;
            font-size: 1.5em;
            margin-bottom: 15px;
            font-weight: bold;
        }

        .start-game-btn {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            padding: 20px 50px;
            font-size: 1.5em;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin: 30px auto 0;
            display: block;
        }

        .start-game-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 20px 50px rgba(16, 185, 129, 0.5);
        }

        /* MAIN CONTAINER SCROLLABLE */
        .main-container {
            position: relative;
            z-index: 1;
            padding-top: 230px;
            min-height: 100vh;
            display: none;
        }

        /* HEADER STATIS TANPA ANIMASI */
        .static-header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background: rgba(15, 23, 42, 0.95);
            padding: 15px;
            z-index: 1000;
            border-bottom: 3px solid #ef4444;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            display: none;
        }

        .game-title {
            text-align: center;
            font-size: 2em;
            color: #fbbf24;
            text-shadow: 2px 2px 0 #000;
            margin-bottom: 5px;
        }

        .game-subtitle {
            text-align: center;
            color: #60a5fa;
            font-style: italic;
            font-size: 0.9em;
        }

        .player-name-display {
            text-align: center;
            color: #f59e0b;
            font-weight: bold;
            margin-top: 5px;
            font-size: 1em;
        }

        /* STATS BAR STATIS */
        .static-stats {
            position: fixed;
            top: 110px;
            left: 0;
            width: 100%;
            background: rgba(30, 41, 59, 0.95);
            padding: 10px;
            z-index: 999;
            display: none;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            border-bottom: 2px solid #475569;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        .stat-card {
            text-align: center;
            padding: 8px;
            background: rgba(15, 23, 42, 0.8);
            border-radius: 8px;
            border: 1px solid #334155;
            transition: none !important;
        }

        .stat-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #10b981;
            text-shadow: 1px 1px 0 #000;
        }

        .stat-label {
            color: #94a3b8;
            font-size: 0.8em;
            margin-top: 3px;
        }

        /* TIME DISPLAY STATIS */
        .static-time {
            position: fixed;
            top: 165px;
            right: 20px;
            background: rgba(15, 23, 42, 0.9);
            padding: 8px 15px;
            border-radius: 8px;
            border: 1px solid #3b82f6;
            color: #60a5fa;
            font-weight: bold;
            z-index: 998;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
            display: none;
            font-size: 0.9em;
        }

        /* WARNING INDICATOR - UNTUK PENJAHAT */
        .thief-warning {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(239, 68, 68, 0.9);
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.8em;
            font-weight: bold;
            display: none;
            z-index: 10;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 0.7; }
            50% { opacity: 1; }
            100% { opacity: 0.7; }
        }

        /* MAIN CONTENT - SCROLLABLE */
        .scrollable-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px 20px 50px;
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        /* CHARACTER INSPECTION SECTION */
        .character-section {
            background: rgba(30, 41, 59, 0.9);
            border-radius: 15px;
            padding: 25px;
            border: 2px solid #3b82f6;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            position: relative;
        }

        .section-title {
            color: #fbbf24;
            font-size: 1.6em;
            margin-bottom: 20px;
            text-align: center;
            border-bottom: 1px solid #3b82f6;
            padding-bottom: 8px;
        }

        .warning-note {
            text-align: center;
            color: #ef4444;
            font-weight: bold;
            background: rgba(239, 68, 68, 0.1);
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 1px solid #ef4444;
            font-size: 0.9em;
        }

        .character-display {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            align-items: center;
            justify-content: center;
        }

        .character-visual {
            flex: 1;
            min-width: 280px;
            text-align: center;
            position: relative;
        }

        .character-at-door {
            width: 280px;
            height: 280px;
            margin: 0 auto 15px;
            border-radius: 12px;
            overflow: hidden;
            border: 3px solid #f59e0b;
            box-shadow: 0 0 20px rgba(245, 158, 11, 0.3);
            position: relative;
        }

        .character-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .door-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent 70%, rgba(139, 92, 246, 0.1));
            pointer-events: none;
        }

        .character-info {
            flex: 1;
            min-width: 280px;
        }

        /* NAMA WARNA HIJAU SAJA */
        .character-name {
            font-size: 2.2em;
            color: #10b981;
            margin-bottom: 12px;
            text-align: center;
            text-shadow: 0 0 5px rgba(16, 185, 129, 0.5);
        }

        .character-description {
            font-size: 1.1em;
            color: #cbd5e1;
            background: rgba(30, 41, 59, 0.6);
            padding: 15px;
            border-radius: 8px;
            border-left: 3px solid #3b82f6;
            margin-bottom: 20px;
        }

        /* DETAILS GRID */
        .details-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 15px;
            margin-top: 25px;
        }

        .detail-card {
            background: rgba(15, 23, 42, 0.8);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid #475569;
            transition: none;
        }

        .detail-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
            color: #60a5fa;
            font-weight: bold;
            font-size: 0.95em;
        }

        .detail-icon {
            font-size: 1.5em;
        }

        .detail-content {
            color: #e2e8f0;
            line-height: 1.5;
            font-size: 1em;
        }

        /* CONTROLS */
        .controls-section {
            display: flex;
            gap: 20px;
            margin-top: 30px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .control-btn {
            padding: 20px 50px;
            font-size: 1.3em;
            font-weight: bold;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s;
            min-width: 250px;
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
        }

        .allow-btn {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            box-shadow: 0 3px 10px rgba(16, 185, 129, 0.3);
        }

        .allow-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(16, 185, 129, 0.4);
        }

        .reject-btn {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
            box-shadow: 0 3px 10px rgba(239, 68, 68, 0.3);
        }

        .reject-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(239, 68, 68, 0.4);
        }

        /* FAMILY ALBUM SECTION */
        .album-section {
            background: rgba(30, 41, 59, 0.9);
            border-radius: 15px;
            padding: 25px;
            border: 2px solid #10b981;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            margin-top: 30px;
        }

        .album-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 20px;
            margin-top: 25px;
        }

        .family-member-card {
            background: rgba(15, 23, 42, 0.8);
            border-radius: 12px;
            overflow: hidden;
            border: 2px solid #475569;
            transition: none;
            cursor: pointer;
        }

        .family-member-card.active {
            border-color: #10b981;
            box-shadow: 0 0 15px rgba(16, 185, 129, 0.3);
        }

        .member-avatar {
            width: 100%;
            height: 180px;
            object-fit: cover;
            border-bottom: 2px solid #475569;
        }

        .member-info {
            padding: 15px;
        }

        .member-name {
            font-size: 1.4em;
            color: #10b981;
            margin-bottom: 12px;
            text-align: center;
        }

        .member-traits {
            color: #cbd5e1;
            line-height: 1.4;
            font-size: 0.9em;
        }

        .member-traits li {
            margin: 6px 0;
            padding-left: 5px;
        }

        .critical-item {
            color: #ef4444;
            font-weight: bold;
        }

        /* ALERTS */
        .alert-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1001;
            max-width: 350px;
        }

        .alert {
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 10px;
            color: white;
            font-weight: bold;
            font-size: 1em;
            animation: slideInUp 0.3s;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
            border-left: 6px solid;
            display: none;
        }

        @keyframes slideInUp {
            from { transform: translateY(100%); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .alert-success {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.9), rgba(5, 150, 105, 0.9));
            border-left-color: #10b981;
        }

        .alert-error {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.9), rgba(220, 38, 38, 0.9));
            border-left-color: #ef4444;
        }

        .alert-warning {
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.9), rgba(217, 119, 6, 0.9));
            border-left-color: #f59e0b;
        }

        /* GAME OVER SCREEN */
        .game-over {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(10px);
        }

        .game-over-content {
            background: linear-gradient(135deg, #0f172a, #1e293b);
            padding: 40px;
            border-radius: 20px;
            border: 3px solid #ef4444;
            max-width: 500px;
            text-align: center;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.6);
        }

        .game-over-title {
            font-size: 2.5em;
            margin-bottom: 20px;
            font-weight: bold;
            color: #ef4444;
        }

        .game-over-message {
            font-size: 1.2em;
            margin-bottom: 20px;
            line-height: 1.5;
            color: #cbd5e1;
        }

        .final-score {
            font-size: 1.1em;
            color: #fbbf24;
            margin-bottom: 30px;
        }

        .final-score span {
            font-size: 1.3em;
            color: #10b981;
        }

        .restart-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        .menu-btn {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            color: white;
            padding: 12px 30px;
            font-size: 1em;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .menu-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 25px rgba(59, 130, 246, 0.4);
        }

        .play-again-btn {
            background: linear-gradient(135deg, #10b981, #059669);
        }

        .play-again-btn:hover {
            box-shadow: 0 10px 25px rgba(16, 185, 129, 0.4);
        }

        /* FOOTER */
        .game-footer {
            text-align: center;
            padding: 20px;
            color: #94a3b8;
            margin-top: 40px;
            border-top: 1px solid #475569;
            font-size: 0.8em;
        }

        .creator-credit {
            color: #f59e0b;
            font-weight: bold;
            margin-top: 8px;
        }

        /* RESPONSIVE */
        @media (max-width: 768px) {
            .static-stats {
                display: none;
            }
            
            .static-time {
                display: none;
            }
            
            .main-container {
                padding-top: 150px;
            }
            
            .controls-section {
                flex-direction: column;
            }
            
            .control-btn {
                width: 100%;
            }
            
            .character-at-door {
                width: 250px;
                height: 250px;
            }
        }

        @media (max-width: 480px) {
            .character-at-door {
                width: 220px;
                height: 220px;
            }
            
            .details-grid {
                grid-template-columns: 1fr;
            }
            
            .album-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- NAME INPUT MODAL -->
    <div class="name-modal" id="nameModal">
        <div class="name-content">
            <h1 class="name-title">THIEF OR MY FAMILY</h1>
            
            <div class="name-input-container">
                <label class="name-label">MASUKKAN NAMA ANDA:</label>
                <input type="text" 
                       class="name-input" 
                       id="playerNameInput" 
                       placeholder="Contoh: Said"
                       maxlength="20"
                       autocomplete="off">
                <div class="name-hint">
                    Nama akan ditampilkan selama permainan
                </div>
            </div>
            
            <button class="start-story-btn" id="startStoryBtn" disabled>
                MEMULAI CERITA
            </button>
        </div>
    </div>

    <!-- STORY MODAL -->
    <div class="story-modal" id="storyModal">
        <div class="story-content">
            <h1 class="story-title">THIEF OR MY FAMILY</h1>
            
            <div class="story-text">
                <p><strong id="storyPlayerName">Said</strong>, kamu tinggal di <strong>Aurora Falls</strong>. Biasanya damai, tapi belakangan ini...</p>
                
                <div class="news-banner">
                    <div class="news-title">üö® BERITA DARURAT üö®</div>
                    <p>Kasus pencurian meningkat 300% dalam sebulan terakhir! Pencuri profesional 
                    menyamar sebagai anggota keluarga untuk memasuki rumah.</p>
                    <p>Mereka mempelajari kebiasaan keluarga, tapi selalu ada <strong>detail yang salah!</strong></p>
                    <p><strong>Contoh:</strong> Baju hijau di album, tapi di depan pintu baju biru = PENJAHAT!</p>
                </div>
                
                <p>Kamu membuat <strong>Album Keluarga</strong> untuk mengenali keluargamu sendiri.</p>
                
                <p>Setiap orang memiliki <strong>ciri khas dan barang bawaan spesifik</strong>. 
                Kamu harus berjaga di pintu dan memeriksa setiap orang.</p>
                
                <p><strong>JENIS-JENIS KESALAHAN PENJAHAT:</strong><br>
                1. <strong>Warna berbeda</strong> - Baju hijau jadi biru, tas merah jadi hitam<br>
                2. <strong>Item hilang</strong> - Tidak bawa laptop, tidak pakai kalung<br>
                3. <strong>Item tambahan</strong> - Bawa paypadahal tidak perlu<br>
                4. <strong>Waktu salah</strong> - Datang jam 10 malam<br>
                5. <strong>Detail tidak cocok</strong> - Rambut biru jadi ungu<br>
                6. <strong>Kedatangan kedua</strong> - Ibu sudah datang, ada ibu lagi!</p>
                
                <p><strong>PERATURAN PENTING:</strong><br>
                1. Setiap anggota keluarga hanya muncul SATU KALI per hari<br>
                2. <strong style="color:#ef4444">SATU KESALAHAN = KALAH!</strong><br>
                3. Bertahan 7 hari tanpa kesalahan = MENANG!</p>
            </div>
            
            <button class="start-game-btn" onclick="startGame()">üö™ BERJAGA DI PINTU</button>
        </div>
    </div>

    <!-- BACKGROUND STATIS -->
    <div class="static-house-bg">
        <div class="house-silhouette"></div>
        <div class="window-light window-1"></div>
        <div class="window-light window-2"></div>
    </div>

    <!-- STATIC HEADER -->
    <div class="static-header" id="staticHeader">
        <h1 class="game-title">THIEF OR MY FAMILY</h1>
        <p class="game-subtitle">"Aurora Falls - Jaga keluargamu dari pencuri penyamar"</p>
        <div class="player-name-display" id="playerNameDisplay"></div>
    </div>

    <!-- STATIC STATS -->
    <div class="static-stats" id="staticStats">
        <div class="stat-card">
            <div class="stat-value" id="dayCount">1</div>
            <div class="stat-label">HARI</div>
        </div>
        <div class="stat-card">
            <div class="stat-value" id="score">100</div>
            <div class="stat-label">SKOR</div>
        </div>
        <div class="stat-card">
            <div class="stat-value" id="familyTrust">100%</div>
            <div class="stat-label">KEPERCAYAAN</div>
        </div>
        <div class="stat-card">
            <div class="stat-value" id="perfectDays">0</div>
            <div class="stat-label">HARI SEMPURNA</div>
        </div>
    </div>

    <!-- STATIC TIME DISPLAY -->
    <div class="static-time" id="staticTime">
        <span id="currentTime">14:00</span> | <span id="currentDay">Hari 1 - Minggu 1</span>
    </div>

    <!-- MAIN SCROLLABLE CONTENT -->
    <div class="main-container" id="mainContainer">
        <div class="scrollable-content">
            <!-- CHARACTER INSPECTION SECTION -->
            <section class="character-section">
                <div class="thief-warning" id="thiefWarning">üö® KEMUNGKINAN PENJAHAT</div>
                
                <h2 class="section-title">üë§ SIAPA YANG MENGETUK PINTU?</h2>
                
                <div class="warning-note">
                    ‚ö†Ô∏è PERHATIAN: Penjahat memiliki BANYAK jenis kesalahan! Periksa SEMUA detail!
                </div>
                
                <div class="character-display">
                    <div class="character-visual">
                        <div class="character-at-door">
                            <img id="charImage" class="character-image" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjMwMCIgdmlld0JveD0iMCAwIDMwMCAzMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjMwMCIgaGVpZ2h0PSIzMDAiIGZpbGw9IiMyMDIwMzAiLz48dGV4dCB4PSIxNTAiIHk9IjE1MCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjIwIiBmaWxsPSIjNjQ3NDhiIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+U29tZW9uZSBhdCB0aGUgZG9vci4uLjwvdGV4dD48L3N2Zz4=" alt="Karakter">
                            <div class="door-overlay"></div>
                        </div>
                        <h3 class="character-name" id="charName">ORANG ASING</h3>
                    </div>
                    
                    <div class="character-info">
                        <div class="character-description" id="charDesc">
                            Seseorang sedang mengetuk pintu depan rumahmu di Aurora Falls. 
                            <strong>Periksa SEMUA detail dengan teliti!</strong>
                        </div>
                        
                        <div class="details-grid">
                            <div class="detail-card">
                                <div class="detail-header">
                                    <div class="detail-icon">üëî</div>
                                    <div>PAKAIAN</div>
                                </div>
                                <div class="detail-content" id="detailWearing">Memeriksa...</div>
                            </div>
                            
                            <div class="detail-card">
                                <div class="detail-header">
                                    <div class="detail-icon">üëú</div>
                                    <div>BAWAAN</div>
                                </div>
                                <div class="detail-content" id="detailCarrying">Memeriksa...</div>
                            </div>
                            
                            <div class="detail-card">
                                <div class="detail-header">
                                    <div class="detail-icon">üìù</div>
                                    <div>ALASAN DATANG</div>
                                </div>
                                <div class="detail-content" id="detailReason">Memeriksa...</div>
                            </div>
                            
                            <div class="detail-card">
                                <div class="detail-header">
                                    <div class="detail-icon">üéØ</div>
                                    <div>CIRI KHUSUS</div>
                                </div>
                                <div class="detail-content" id="detailSpecial">Memeriksa...</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="controls-section">
                    <button class="control-btn allow-btn" onclick="allowPerson()">‚úÖ IZINKAN MASUK</button>
                    <button class="control-btn reject-btn" onclick="rejectPerson()">üö® TOLAK & PANGGIL POLISI</button>
                </div>
                
                <div style="text-align: center; margin-top: 25px; color: #94a3b8; font-size: 0.85em;">
                    <strong>INGAT: BANYAK JENIS KESALAHAN! Scroll ke bawah untuk bandingkan!</strong>
                </div>
            </section>

            <!-- FAMILY ALBUM SECTION -->
            <section class="album-section">
                <h2 class="section-title">üìñ ALBUM KELUARGA KHAS AURORA FALLS</h2>
                <p style="text-align: center; color: #10b981; margin-bottom: 25px; font-size: 0.95em;">
                    <strong>BANDINGKAN SEMUA DETAIL! Jika ADA YANG BERBEDA = PENJAHAT!</strong>
                </p>
                
                <div class="album-grid">
                    <!-- AYAH -->
                    <div class="family-member-card active" onclick="showMemberInfo('father')">
                        <img src="https://images.unsplash.com/photo-1582750433449-648ed127bb54?w=400&h=300&fit=crop&crop=face" class="member-avatar" alt="Ayah">
                        <div class="member-info">
                            <h3 class="member-name">AYAH - Bapak</h3>
                            <ul class="member-traits">
                                <li class="critical-item"><strong>Pakaian:</strong> Kemeja BIRU, dasi HITAM, jam tangan SILVER</li>
                                <li class="critical-item"><strong>BAWAAN WAJIB:</strong> Tas kerja HITAM + kunci mobil + laptop bag</li>
                                <li><strong>Waktu normal:</strong> 18:00 - 19:00</li>
                                <li class="critical-item"><strong>Ciri khusus:</strong> KUMIS, cincin pernikahan, stiker perusahaan di tas</li>
                                <li><strong>Catatan:</strong> Hanya datang SEKALI per hari!</li>
                            </ul>
                        </div>
                    </div>
                    
                    <!-- IBU -->
                    <div class="family-member-card" onclick="showMemberInfo('mother')">
                        <img src="https://images.unsplash.com/photo-1580894732444-8ecded7900cd?w=400&h=300&fit=crop&crop=face" class="member-avatar" alt="Ibu">
                        <div class="member-info">
                            <h3 class="member-name">IBU - Ibu</h3>
                            <ul class="member-traits">
                                <li class="critical-item"><strong>Pakaian:</strong> Dress MERAH, kalung MUTIARA, sepatu flat HITAM</li>
                                <li class="critical-item"><strong>Bawaan:</strong> Tas belanja BESAR + dompet COKLAT + daftar belanja</li>
                                <li><strong>Waktu normal:</strong> 10:00-12:00 atau 15:00-17:00</li>
                                <li class="critical-item"><strong>Ciri khusus:</strong> Gelang EMAS, rambut DIKAT, struk belanja</li>
                                <li><strong>Catatan:</strong> Hanya datang SEKALI per hari!</li>
                            </ul>
                        </div>
                    </div>
                    
                    <!-- KAKAK -->
                    <div class="family-member-card" onclick="showMemberInfo('sister')">
                        <img src="https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=400&h=300&fit=crop&crop=face" class="member-avatar" alt="Kakak">
                        <div class="member-info">
                            <h3 class="member-name">KAKAK - Sarah</h3>
                            <ul class="member-traits">
                                <li class="critical-item"><strong>Pakaian:</strong> Jaket hoodie ABU-ABU, celana jeans ROBEK, sneakers PUTIH</li>
                                <li class="critical-item"><strong>BAWAAN WAJIB:</strong> Tas ransel BIRU + SKATEBOARD + HEADPHONE</li>
                                <li><strong>Waktu normal:</strong> 13:00 - 16:00</li>
                                <li class="critical-item"><strong>Ciri khusus:</strong> Rambut BIRU, tattoo 'AURORA', piercing HIDUNG</li>
                                <li><strong>Catatan:</strong> Hanya datang SEKALI per hari!</li>
                            </ul>
                        </div>
                    </div>
                    
                    <!-- ADIK -->
                    <div class="family-member-card" onclick="showMemberInfo('brother')">
                        <img src="https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?w=400&h=300&fit=crop&crop=face" class="member-avatar" alt="Adik">
                        <div class="member-info">
                            <h3 class="member-name">ADIK - Rizky</h3>
                            <ul class="member-traits">
                                <li class="critical-item"><strong>Pakaian:</strong> Seragam sekolah PUTIH-BIRU, dasi MERAH, sepatu HITAM</li>
                                <li class="critical-item"><strong>BAWAAN WAJIB:</strong> Tas sekolah MERAH + buku gambar A3 + botol minum</li>
                                <li><strong>Waktu normal:</strong> 14:00 - 15:00</li>
                                <li class="critical-item"><strong>Ciri khusus:</strong> KACAMATA, bekas luka di DAGU, ikat pinggang BIRU</li>
                                <li><strong>Catatan:</strong> Hanya datang SEKALI per hari!</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- FOOTER -->
            <div class="game-footer">
                <p>Game "Thief or My Family" - Sebuah cerita tentang melindungi keluarga di kota Aurora Falls</p>
                <p class="creator-credit">Dibuat oleh: <span id="footerPlayerName">Player</span></p>
            </div>
        </div>
    </div>

    <!-- ALERT CONTAINER -->
    <div class="alert-container">
        <div id="alertBox" class="alert"></div>
    </div>

    <!-- GAME OVER SCREEN -->
    <div class="game-over" id="gameOverScreen">
        <div class="game-over-content">
            <h2 class="game-over-title" id="gameOverTitle">KALAH!</h2>
            <p class="game-over-message" id="gameOverMessage"></p>
            <div class="final-score" id="finalScore"></div>
            <div class="restart-buttons">
                <button class="menu-btn" onclick="goToMenu()">üè† MENU UTAMA</button>
                <button class="menu-btn play-again-btn" onclick="playAgain()">üîÑ COBA LAGI</button>
            </div>
        </div>
    </div>

    <script>
        // ====================
        // GAME VARIABLES
        // ====================
        let playerName = "";
        let score = 100;
        let day = 1;
        let week = 1;
        let perfectDays = 0;
        let familyTrust = 100;
        let currentCharacter = null;
        let isThief = false;
        let gameActive = true;
        let gameTime = 14;
        let familyVisitedToday = [];
        let visitedCount = 0;
        let madeMistakeToday = false;
        let difficultyLevel = 1;
        let usedErrorPatterns = [];
        let currentErrorType = "";
        let errorHistory = [];

        // ====================
        // GAME DATA - TIDAK DIBERI JAWABAN
        // ====================
        const familyDatabase = {
            father: {
                name: "AYAH",
                image: "https://images.unsplash.com/photo-1582750433449-648ed127bb54?w=300&h=300&fit=crop&crop=face",
                desc: "Pulang dari kantor di pusat kota Aurora Falls",
                time: "18:00 - 19:00",
                details: {
                    wearing: "Kemeja biru, dasi hitam, jam tangan silver",
                    carrying: "Tas kerja hitam, kunci mobil, laptop bag",
                    reason: "Pulang kerja dari kantor di pusat kota",
                    special: "Ada kumis, cincin pernikahan, tas ada stiker perusahaan"
                }
            },
            mother: {
                name: "IBU",
                image: "https://images.unsplash.com/photo-1580894732444-8ecded7900cd?w=300&h=300&fit=crop&crop=face",
                desc: "Baru pulang belanja dari Pasar Aurora",
                time: "10:00-12:00 atau 15:00-17:00",
                details: {
                    wearing: "Dress merah, kalung mutiara, sepatu flat hitam",
                    carrying: "Tas belanja besar, dompet coklat, daftar belanja",
                    reason: "Baru belanja kebutuhan mingguan di Pasar Aurora",
                    special: "Gelang emas, rambut diikat, bawa struk belanja"
                }
            },
            sister: {
                name: "KAKAK",
                image: "https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=300&h=300&fit=crop&crop=face",
                desc: "Pulang dari kampus Universitas Aurora Falls",
                time: "13:00 - 16:00",
                details: {
                    wearing: "Jaket hoodie abu-abu, celana jeans robek, sneakers putih",
                    carrying: "Tas ransel biru, skateboard, headphone",
                    reason: "Pulang kuliah dari Universitas Aurora Falls",
                    special: "Rambut biru, tattoo 'Aurora', piercing hidung"
                }
            },
            brother: {
                name: "ADIK",
                image: "https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?w=300&h=300&fit=crop&crop=face",
                desc: "Pulang dari SMP Aurora Falls",
                time: "14:00 - 15:00",
                details: {
                    wearing: "Seragam sekolah putih-biru, dasi merah, sepatu hitam",
                    carrying: "Tas sekolah merah, buku gambar, botol minum",
                    reason: "Pulang sekolah dari SMP Aurora Falls",
                    special: "Kacamata, bekas luka di dagu, ikat pinggang biru"
                }
            }
        };

        // SISTEM KESALAHAN YANG SEMAKIN SULIT
        const errorPatterns = {
            // LEVEL 1: Kesalahan jelas
            level1: [
                {
                    name: "warna_salah",
                    apply: (char, real) => {
                        if (char === 'father') return { wearing: real.wearing.replace("biru", "hijau") };
                        if (char === 'mother') return { wearing: real.wearing.replace("merah", "biru") };
                        if (char === 'sister') return { wearing: real.wearing.replace("abu-abu", "hitam") };
                        if (char === 'brother') return { wearing: real.wearing.replace("merah", "biru") };
                    }
                },
                {
                    name: "item_hilang",
                    apply: (char, real) => {
                        if (char === 'father') return { carrying: real.carrying.replace(", laptop bag", "") };
                        if (char === 'mother') return { carrying: real.carrying.replace(", daftar belanja", "") };
                        if (char === 'sister') return { carrying: real.carrying.replace(", skateboard", "") };
                        if (char === 'brother') return { carrying: real.carrying.replace(", buku gambar", "") };
                    }
                }
            ],
            
            // LEVEL 2: Kesalahan lebih halus
            level2: [
                {
                    name: "detail_salah",
                    apply: (char, real) => {
                        if (char === 'father') return { special: real.special.replace("kumis", "tidak berkumis") };
                        if (char === 'mother') return { special: real.special.replace("rambut diikat", "rambut terurai") };
                        if (char === 'sister') return { special: real.special.replace("biru", "ungu") };
                        if (char === 'brother') return { special: real.special.replace("kacamata", "tidak berkacamata") };
                    }
                },
                {
                    name: "item_tambahan",
                    apply: (char, real) => {
                        if (char === 'father') return { carrying: real.carrying + ", payung" };
                        if (char === 'mother') return { carrying: real.carrying + ", kue nastar" };
                        if (char === 'sister') return { carrying: real.carrying + ", buku catatan" };
                        if (char === 'brother') return { carrying: real.carrying + ", mainan robot" };
                    }
                }
            ],
            
            // LEVEL 3: Kesalahan kompleks
            level3: [
                {
                    name: "multi_error",
                    apply: (char, real) => {
                        let changes = {};
                        if (char === 'father') {
                            changes.wearing = real.wearing.replace("biru", "hijau");
                            changes.carrying = real.carrying.replace(", laptop bag", "");
                        }
                        if (char === 'mother') {
                            changes.wearing = real.wearing.replace("merah", "biru");
                            changes.special = real.special.replace("gelang emas", "");
                        }
                        if (char === 'sister') {
                            changes.wearing = real.wearing.replace("abu-abu", "hitam");
                            changes.special = real.special.replace("biru", "ungu");
                        }
                        if (char === 'brother') {
                            changes.wearing = real.wearing.replace("merah", "biru");
                            changes.special = real.special.replace("kacamata", "tidak berkacamata");
                        }
                        return changes;
                    }
                }
            ],
            
            // LEVEL 4: Kesalahan sangat halus
            level4: [
                {
                    name: "subtle_error",
                    apply: (char, real) => {
                        if (char === 'father') return { 
                            wearing: real.wearing.replace("silver", "emas"),
                            special: real.special.replace("stiker perusahaan", "tanpa stiker")
                        };
                        if (char === 'mother') return { 
                            carrying: real.carrying.replace("coklat", "hitam"),
                            special: real.special.replace("struk belanja", "tanpa struk")
                        };
                        if (char === 'sister') return { 
                            carrying: real.carrying.replace("biru", "hitam"),
                            special: real.special.replace("'Aurora'", "'Falls'")
                        };
                        if (char === 'brother') return { 
                            wearing: real.wearing.replace("putih-biru", "biru-putih"),
                            special: real.special.replace("dagu", "pipi")
                        };
                    }
                }
            ]
        };

        // ====================
        // DOM ELEMENTS
        // ====================
        const nameModal = document.getElementById('nameModal');
        const storyModal = document.getElementById('storyModal');
        const mainContainer = document.getElementById('mainContainer');
        const staticHeader = document.getElementById('staticHeader');
        const staticStats = document.getElementById('staticStats');
        const staticTime = document.getElementById('staticTime');
        const playerNameInput = document.getElementById('playerNameInput');
        const startStoryBtn = document.getElementById('startStoryBtn');
        const storyPlayerName = document.getElementById('storyPlayerName');
        const playerNameDisplay = document.getElementById('playerNameDisplay');
        const footerPlayerName = document.getElementById('footerPlayerName');
        const thiefWarning = document.getElementById('thiefWarning');

        const charNameEl = document.getElementById('charName');
        const charImageEl = document.getElementById('charImage');
        const charDescEl = document.getElementById('charDesc');
        const detailWearingEl = document.getElementById('detailWearing');
        const detailCarryingEl = document.getElementById('detailCarrying');
        const detailReasonEl = document.getElementById('detailReason');
        const detailSpecialEl = document.getElementById('detailSpecial');
        const dayCountEl = document.getElementById('dayCount');
        const scoreEl = document.getElementById('score');
        const familyTrustEl = document.getElementById('familyTrust');
        const perfectDaysEl = document.getElementById('perfectDays');
        const currentTimeEl = document.getElementById('currentTime');
        const currentDayEl = document.getElementById('currentDay');
        const alertBox = document.getElementById('alertBox');
        const gameOverScreen = document.getElementById('gameOverScreen');
        const gameOverTitle = document.getElementById('gameOverTitle');
        const gameOverMessage = document.getElementById('gameOverMessage');
        const finalScore = document.getElementById('finalScore');

        // ====================
        // NAME INPUT HANDLING
        // ====================
        playerNameInput.addEventListener('input', function() {
            const name = this.value.trim();
            startStoryBtn.disabled = name.length < 2;
        });

        playerNameInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && !startStoryBtn.disabled) {
                startStory();
            }
        });

        startStoryBtn.addEventListener('click', startStory);

        function startStory() {
            playerName = playerNameInput.value.trim();
            if (playerName.length < 2) return;
            
            storyPlayerName.textContent = playerName;
            
            nameModal.style.display = 'none';
            storyModal.style.display = 'flex';
        }

        // ====================
        // GAME FUNCTIONS
        // ====================
        function startGame() {
            storyModal.style.display = 'none';
            
            playerNameDisplay.textContent = `Pemain: ${playerName}`;
            footerPlayerName.textContent = playerName;
            
            mainContainer.style.display = 'block';
            staticHeader.style.display = 'block';
            staticStats.style.display = 'grid';
            staticTime.style.display = 'block';
            
            resetGame();
        }

        function resetGame() {
            score = 100;
            day = 1;
            week = 1;
            familyTrust = 100;
            perfectDays = 0;
            gameTime = 14;
            gameActive = true;
            familyVisitedToday = [];
            visitedCount = 0;
            madeMistakeToday = false;
            difficultyLevel = 1;
            usedErrorPatterns = [];
            errorHistory = [];
            
            updateStats();
            generateCharacter();
            updateTimeDisplay();
            
            gameOverScreen.style.display = 'none';
            showAlert("üö® Hari 1: Mulai dengan kesalahan mudah. Tapi hati-hati, akan semakin sulit!", "warning");
        }

        function updateStats() {
            dayCountEl.textContent = day;
            scoreEl.textContent = score;
            familyTrustEl.textContent = familyTrust + '%';
            perfectDaysEl.textContent = perfectDays;
            currentDayEl.textContent = `Hari ${day} - Minggu ${week} (Lv.${difficultyLevel})`;
        }

        function updateTimeDisplay() {
            currentTimeEl.textContent = gameTime + ':00';
            
            const bg = document.querySelector('.static-house-bg');
            const windows = document.querySelectorAll('.window-light');
            
            if (gameTime >= 18 || gameTime <= 6) {
                bg.style.background = 'linear-gradient(to bottom, #0f172a, #1e293b, #334155)';
                windows.forEach(w => {
                    w.style.opacity = '1';
                    w.style.boxShadow = '0 0 30px #fbbf24';
                });
            } else if (gameTime >= 6 && gameTime < 12) {
                bg.style.background = 'linear-gradient(to bottom, #4f46e5, #6366f1, #818cf8)';
                windows.forEach(w => w.style.opacity = '0.5');
            } else {
                bg.style.background = 'linear-gradient(to bottom, #0ea5e9, #38bdf8, #7dd3fc)';
                windows.forEach(w => w.style.opacity = '0.3');
            }
        }

        function generateCharacter() {
            if (!gameActive) return;
            
            // Cek apakah sudah semua anggota keluarga datang hari ini
            if (familyVisitedToday.length >= 4) {
                endDay();
                return;
            }
            
            const members = Object.keys(familyDatabase);
            const availableMembers = members.filter(m => !familyVisitedToday.includes(m));
            
            let charType;
            
            // Tingkatkan kesulitan setiap 2 hari
            if (day % 2 === 0 && difficultyLevel < 4) {
                difficultyLevel++;
            }
            
            // Probabilitas penjahat meningkat seiring waktu
            let thiefChance = 0.4 + (week * 0.1);
            thiefChance = Math.min(0.8, thiefChance);
            
            isThief = Math.random() < thiefChance;
            
            if (!isThief && availableMembers.length > 0) {
                charType = availableMembers[Math.floor(Math.random() * availableMembers.length)];
                familyVisitedToday.push(charType);
            } else {
                charType = members[Math.floor(Math.random() * members.length)];
                
                // Jika penjahat memilih orang yang sudah datang, itu kesalahan
                if (familyVisitedToday.includes(charType)) {
                    currentErrorType = "kedatangan_kedua";
                } else if (Math.random() < 0.3) {
                    // 30% kemungkinan penjahat menyamar sebagai orang yang belum datang
                    familyVisitedToday.push(charType);
                }
            }
            
            const charData = familyDatabase[charType];
            
            // Tampilkan karakter
            charNameEl.textContent = charData.name;
            charImageEl.src = charData.image;
            charDescEl.textContent = charData.desc;
            
            let details = { ...charData.details };
            
            // Jika penjahat, tambahkan kesalahan
            if (isThief) {
                thiefWarning.style.display = 'block';
                currentErrorType = generateError(charType, details);
                
                // Jika kedatangan kedua
                if (familyVisitedToday.includes(charType) && currentErrorType !== "kedatangan_kedua") {
                    currentErrorType = "kedatangan_kedua";
                }
            } else {
                thiefWarning.style.display = 'none';
                currentErrorType = "";
            }
            
            // Tampilkan detail
            detailWearingEl.textContent = details.wearing;
            detailCarryingEl.textContent = details.carrying;
            detailReasonEl.textContent = details.reason;
            detailSpecialEl.textContent = details.special;
            
            currentCharacter = {
                type: charType,
                isThief: isThief,
                name: charData.name,
                errorType: currentErrorType
            };
            
            visitedCount++;
            advanceTime();
        }

        function generateError(charType, details) {
            // Tentukan level kesalahan berdasarkan kesulitan
            let availableLevels = [];
            if (difficultyLevel === 1) availableLevels = ['level1'];
            else if (difficultyLevel === 2) availableLevels = ['level1', 'level2'];
            else if (difficultyLevel === 3) availableLevels = ['level2', 'level3'];
            else availableLevels = ['level3', 'level4'];
            
            // Pilih level
            const selectedLevel = availableLevels[Math.floor(Math.random() * availableLevels.length)];
            const patterns = errorPatterns[selectedLevel];
            
            if (patterns && patterns.length > 0) {
                // Pilih pattern yang belum sering digunakan
                let availablePatterns = patterns.filter(p => 
                    !usedErrorPatterns.includes(p.name) || 
                    usedErrorPatterns.filter(x => x === p.name).length < 2
                );
                
                if (availablePatterns.length === 0) {
                    availablePatterns = patterns;
                }
                
                const pattern = availablePatterns[Math.floor(Math.random() * availablePatterns.length)];
                const changes = pattern.apply(charType, details);
                
                // Terapkan perubahan
                Object.assign(details, changes);
                usedErrorPatterns.push(pattern.name);
                errorHistory.push(pattern.name);
                
                return pattern.name;
            }
            
            return "unknown_error";
        }

        function advanceTime() {
            gameTime += Math.floor(Math.random() * 3) + 1;
            
            if (gameTime > 22) {
                gameTime = 8 + Math.floor(Math.random() * 4);
            }
            
            updateTimeDisplay();
        }

        function showMemberInfo(member) {
            const data = familyDatabase[member];
            
            document.querySelectorAll('.family-member-card').forEach(el => {
                el.classList.remove('active');
            });
            event.currentTarget.classList.add('active');
            
            showAlert(`Melihat detail ${data.name}. Periksa semua detail dengan teliti!`, "warning");
        }

        function showAlert(message, type) {
            alertBox.textContent = message;
            alertBox.className = `alert alert-${type}`;
            alertBox.style.display = 'block';
            
            setTimeout(() => {
                alertBox.style.display = 'none';
            }, 3000);
        }

        function allowPerson() {
            if (!gameActive) return;
            
            if (!isThief) {
                // BENAR: mengizinkan keluarga asli masuk
                let points = 20 + (difficultyLevel * 5);
                score += points;
                familyTrust = Math.min(100, familyTrust + 5);
                
                let diffText = difficultyLevel > 1 ? ` (Bonus +${difficultyLevel * 5})` : '';
                showAlert(`‚úÖ BENAR! Itu ${currentCharacter.name} asli. +${points} Poin${diffText}`, 'success');
            } else {
                // SALAH: mengizinkan penjahat masuk
                madeMistakeToday = true;
                
                let errorMsg = "Ada detail yang tidak cocok!";
                if (currentErrorType === "kedatangan_kedua") {
                    errorMsg = `${currentCharacter.name} sudah datang hari ini!`;
                }
                
                endGame(`Kamu mengizinkan pencuri masuk! ${errorMsg}`);
                return;
            }
            
            updateStats();
            setTimeout(generateCharacter, 1500);
        }

        function rejectPerson() {
            if (!gameActive) return;
            
            if (isThief) {
                // BENAR: menolak penjahat
                let points = 30 + (difficultyLevel * 10);
                score += points;
                familyTrust = Math.min(100, familyTrust + 8);
                
                let diffText = difficultyLevel > 1 ? ` (Bonus +${difficultyLevel * 10})` : '';
                let successMsg = `üéØ HEBAT! Kamu berhasil membongkar pencuri! +${points} Poin${diffText}`;
                
                showAlert(successMsg, 'success');
            } else {
                // SALAH: menolak keluarga asli
                madeMistakeToday = true;
                endGame(`Kamu menolak ${currentCharacter.name} yang asli! Keluargamu kecewa.`);
                return;
            }
            
            updateStats();
            setTimeout(generateCharacter, 1500);
        }

        function endDay() {
            if (!madeMistakeToday) {
                perfectDays++;
                let dayBonus = 50 + (difficultyLevel * 20);
                score += dayBonus;
                familyTrust = Math.min(100, familyTrust + 10);
                
                let diffText = difficultyLevel > 1 ? ` (Bonus +${difficultyLevel * 20})` : '';
                showAlert(`üéâ HARI ${day} SELESAI! Tidak tertipu! +${dayBonus} Poin${diffText}`, 'success');
                
                if (perfectDays >= 7) {
                    gameWin();
                    return;
                }
            }
            
            // Pindah ke hari berikutnya
            day++;
            familyVisitedToday = [];
            visitedCount = 0;
            madeMistakeToday = false;
            gameTime = 14;
            
            // Reset beberapa pattern setiap hari baru
            if (usedErrorPatterns.length > 5) {
                usedErrorPatterns = usedErrorPatterns.slice(-3);
            }
            
            updateStats();
            updateTimeDisplay();
            
            if (day > 7) {
                day = 1;
                week++;
                showAlert(`üåô MINGGU ${week}! Pencuri belajar trik baru!`, "warning");
            }
            
            setTimeout(generateCharacter, 2000);
        }

        function gameWin() {
            gameActive = false;
            gameOverTitle.textContent = "üéâ SELAMAT!";
            gameOverMessage.textContent = `${playerName}, kamu bertahan 7 hari tanpa kesalahan! Pencuri tidak bisa menipumu!`;
            finalScore.innerHTML = `
                Total Skor: <span>${score}</span><br>
                Minggu: <span>${week}</span><br>
                Level Tertinggi: <span>${difficultyLevel}</span><br>
                Jenis Kesalahan Dikenali: <span>${new Set(errorHistory).size}</span>
            `;
            gameOverScreen.style.display = 'flex';
        }

        function endGame(reason) {
            gameActive = false;
            
            gameOverTitle.textContent = "KALAH!";
            gameOverMessage.textContent = `${playerName}, kamu kalah! ${reason}`;
            finalScore.innerHTML = `
                Skor Akhir: <span>${score}</span><br>
                Hari: <span>${day}</span><br>
                Minggu: <span>${week}</span><br>
                Level: <span>${difficultyLevel}</span>
            `;
            
            gameOverScreen.style.display = 'flex';
        }

        function goToMenu() {
            gameOverScreen.style.display = 'none';
            mainContainer.style.display = 'none';
            staticHeader.style.display = 'none';
            staticStats.style.display = 'none';
            staticTime.style.display = 'none';
            
            playerNameInput.value = '';
            startStoryBtn.disabled = true;
            
            nameModal.style.display = 'flex';
        }

        function playAgain() {
            gameOverScreen.style.display = 'none';
            resetGame();
        }

        // Keyboard controls
        document.addEventListener('keydown', function(e) {
            if (!gameActive) return;
            
            if (e.key === 'a' || e.key === 'A') {
                allowPerson();
            } else if (e.key === 'r' || e.key === 'R') {
                rejectPerson();
            }
        });

        // Initialize
        window.onload = function() {
            nameModal.style.display = 'flex';
        };
    </script>
</body>
</html>
